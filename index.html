<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>今日の天気</title>

<style>
body {
  margin: 0;
  font-family: "Segoe UI", "Noto Sans JP", sans-serif;
}

.weather-header {
  height: 75vh;
  position: relative;
  background-image: url("https://images.unsplash.com/photo-1501630834273-4b5604d2ee31");
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  overflow: hidden;
}

/* 背景オーバーレイ（時間帯で変化） */
.overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.3); /* 初期値 */
  z-index: 1;
  pointer-events: none;
}

/* 文字 */
.weather-text {
  position: relative;
  z-index: 2;
  color: #fff;
  line-height: 1.5;
  text-shadow:
    3px 3px 0 #000,
   -3px 3px 0 #000,
    3px -3px 0 #000,
   -3px -3px 0 #000;
}

.weather-date {
  font-size: 20px;
  margin-bottom: 14px;
  opacity: 0.9;
}

.weather-main {
  font-size: 42px;
  font-weight: bold;
  margin-bottom: 10px;
}

.weather-temp {
  font-size: 42px;
}

@media (max-width: 600px) {
  .weather-main,
  .weather-temp { font-size: 30px; }
  .weather-date { font-size: 16px; }
}
</style>
</head>

<body>

<div class="weather-header">
  <div class="overlay" id="overlay"></div>
  <div class="weather-text">
    <div class="weather-date" id="date"></div>
    <div class="weather-main" id="weather"></div>
    <div class="weather-temp" id="temp"></div>
  </div>
</div>

<script>
const API_KEY = "YOUR_API_KEY"; // 自分のAPIキー
const CITY = "Tokyo,jp";

// 天気取得
fetch(`https://api.openweathermap.org/data/2.5/weather?q=${CITY}&appid=${API_KEY}&units=metric&lang=ja`)
  .then(res => res.json())
  .then(data => {
    const today = new Date();
    document.getElementById("date").textContent =
      today.toLocaleDateString("ja-JP", {
        year: "numeric",
        month: "long",
        day: "numeric",
        weekday: "long"
      });

    document.getElementById("weather").textContent = data.weather[0].description;
    document.getElementById("temp").textContent = `${Math.round(data.main.temp)}℃`;

    // 背景オーバーレイの明るさを時間帯で決定
    const overlay = document.getElementById("overlay");
    const hour = today.getHours();
    let alpha = 0.3; // デフォルト明るさ

    if (hour >= 5 && hour < 15) {
      alpha = 0.1; // 明るい
    } else if (hour >= 15 && hour < 18) {
      alpha = 0.25; // 中くらい
    } else {
      alpha = 0.5; // 暗め
    }

    overlay.style.backgroundColor = `rgba(0,0,0,${alpha})`;
  })
  .catch(err => {
    document.getElementById("weather").textContent = "天気取得失敗";
    console.error(err);
  });
</script>

</body>
</html>
